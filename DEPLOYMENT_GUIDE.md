# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Food2Mood API

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—é API –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –µ–≥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í—ã–±–æ—Ä —Ö–æ—Å—Ç–∏–Ω–≥–∞](#–≤—ã–±–æ—Ä-—Ö–æ—Å—Ç–∏–Ω–≥–∞)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫–æ–¥–∞)
3. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–Ω–∞-vps)
4. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–Ω–∞-–æ–±–ª–∞—á–Ω—ã—Ö-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞-–∏-ssl)
6. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üñ•Ô∏è –í—ã–±–æ—Ä —Ö–æ—Å—Ç–∏–Ω–≥–∞

### –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

#### 1. **VPS (Virtual Private Server)** - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **DigitalOcean**: –æ—Ç $6/–º–µ—Å—è—Ü
- **Linode**: –æ—Ç $5/–º–µ—Å—è—Ü
- **Vultr**: –æ—Ç $6/–º–µ—Å—è—Ü
- **Hetzner**: –æ—Ç ‚Ç¨4/–º–µ—Å—è—Ü
- **AWS EC2**: –æ—Ç $5/–º–µ—Å—è—Ü

**–ü–ª—é—Å—ã**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –≥–∏–±–∫–æ—Å—Ç—å, –Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
**–ú–∏–Ω—É—Å—ã**: –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

#### 2. **–û–±–ª–∞—á–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (PaaS)**
- **Heroku**: –æ—Ç $7/–º–µ—Å—è—Ü (–ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π)
- **Railway**: –æ—Ç $5/–º–µ—Å—è—Ü
- **Render**: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–æ—Å—Ç—É–ø–µ–Ω
- **Fly.io**: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –¥–æ—Å—Ç—É–ø–µ–Ω
- **PythonAnywhere**: –æ—Ç $5/–º–µ—Å—è—Ü

**–ü–ª—é—Å—ã**: –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ú–∏–Ω—É—Å—ã**: –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è, –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Ä–æ–∂–µ

---

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `api/main_prod.py`:

```python
"""
Food2Mood API - Production Configuration
"""
from fastapi import FastAPI, HTTPException, status
from fastapi.middleware.cors import CORSMiddleware
import os
import sys

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from database.db import Database
from api.models import *
from api.endpoints import menu, users, questionnaire

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
db_path = os.getenv("DATABASE_PATH", "/app/files/databse.db")
try:
    db = Database(db_path)
except Exception as e:
    print(f"‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î: {e}")
    db = None

# –°–æ–∑–¥–∞–Ω–∏–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
app = FastAPI(
    title="Food2Mood API",
    description="API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –±–ª—é–¥ Food2Mood",
    version="1.0.0",
    docs_url="/docs",
    redoc_url="/redoc",
    openapi_version="3.0.2"
)

# CORS middleware - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
allowed_origins = os.getenv("ALLOWED_ORIGINS", "*").split(",")

app.add_middleware(
    CORSMiddleware,
    allow_origins=allowed_origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Dependency –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
def get_database():
    return db

# –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤
app.include_router(menu.router, prefix="/api/v1/menu", tags=["menu"])
app.include_router(users.router, prefix="/api/v1/users", tags=["users"])
app.include_router(questionnaire.router, prefix="/api/v1", tags=["questionnaire"])

@app.get("/")
async def root():
    """–ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç"""
    return {
        "message": "Food2Mood API",
        "version": "1.0.0",
        "docs": "/docs",
        "status": "online"
    }

@app.get("/health")
async def health_check():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API"""
    try:
        if db is None:
            return {
                "status": "degraded",
                "database": "not_initialized"
            }
        db.connection.execute("SELECT 1")
        return {
            "status": "healthy",
            "database": "connected"
        }
    except Exception as e:
        return {
            "status": "degraded",
            "database": "error",
            "error": str(e)
        }
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# .env
DATABASE_PATH=/app/files/databse.db
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
SECRET_KEY=your-secret-key-here
DEBUG=False
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ `Dockerfile` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```dockerfile
FROM python:3.9-slim

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY api/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . .

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ë–î
RUN mkdir -p /app/files

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONUNBUFFERED=1

# –ü–æ—Ä—Ç
EXPOSE 8000

# –ó–∞–ø—É—Å–∫
CMD ["uvicorn", "api.main_prod:app", "--host", "0.0.0.0", "--port", "8000"]
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ `.dockerignore`

```
__pycache__
*.pyc
*.pyo
*.pyd
.Python
*.so
*.egg
*.egg-info
dist
build
.git
.venv
venv/
env/
.env
```

---

## üñ•Ô∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@your-server-ip
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ü–û

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ pip
apt install python3 python3-pip python3-venv -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
apt install git -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx (–¥–ª—è reverse proxy)
apt install nginx -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supervisor (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º)
apt install supervisor -y
```

### –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /opt
git clone https://github.com/yourusername/koreanchick.git
cd koreanchick
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r api/requirements.txt
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supervisor

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/supervisor/conf.d/food2mood-api.conf`:

```ini
[program:food2mood-api]
command=/opt/koreanchick/venv/bin/uvicorn api.main_prod:app --host 0.0.0.0 --port 8000
directory=/opt/koreanchick
user=www-data
autostart=true
autorestart=true
stderr_logfile=/var/log/food2mood-api/error.log
stdout_logfile=/var/log/food2mood-api/access.log
environment=PATH="/opt/koreanchick/venv/bin"
```

–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤:
```bash
mkdir -p /var/log/food2mood-api
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Supervisor:
```bash
supervisorctl reread
supervisorctl update
supervisorctl start food2mood-api
supervisorctl status
```

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∫–∞–∫ Reverse Proxy

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/nginx/sites-available/food2mood-api`:

```nginx
server {
    listen 80;
    server_name api.yourdomain.com;

    client_max_body_size 10M;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```bash
ln -s /etc/nginx/sites-available/food2mood-api /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx
```

---

## ‚òÅÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

### Heroku

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Heroku CLI
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Procfile`:
```
web: uvicorn api.main_prod:app --host 0.0.0.0 --port $PORT
```

3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
```bash
heroku login
heroku create food2mood-api
heroku config:set DATABASE_PATH=/app/files/databse.db
git push heroku main
```

### Railway

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Python –ø—Ä–æ–µ–∫—Ç
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç

### Render

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Build Command**: `pip install -r api/requirements.txt`
   - **Start Command**: `uvicorn api.main_prod:app --host 0.0.0.0 --port $PORT`
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. Deploy!

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –≤ DNS –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞:
```
Type: A
Name: api (–∏–ª–∏ @ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –¥–æ–º–µ–Ω–∞)
Value: IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
TTL: 3600
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Let's Encrypt)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
apt install certbot python3-certbot-nginx -y

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot --nginx -d api.yourdomain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
certbot renew --dry-run
```

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –¥–ª—è HTTPS.

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx –¥–ª—è HTTPS

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ SSL, Nginx –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```nginx
server {
    listen 80;
    server_name api.yourdomain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name api.yourdomain.com;

    ssl_certificate /etc/letsencrypt/live/api.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.yourdomain.com/privkey.pem;

    client_max_body_size 10M;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ CORS

–û–±–Ω–æ–≤–∏—Ç–µ `api/main_prod.py`:
```python
allowed_origins = os.getenv(
    "ALLOWED_ORIGINS", 
    "https://yourdomain.com,https://www.yourdomain.com"
).split(",")
```

### 2. Rate Limiting

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `slowapi`:
```bash
pip install slowapi
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `api/main_prod.py`:
```python
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address
from slowapi.errors import RateLimitExceeded

limiter = Limiter(key_func=get_remote_address)
app.state.limiter = limiter
app.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)

@app.get("/")
@limiter.limit("100/minute")
async def root(request: Request):
    ...
```

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ fail2ban:
```bash
apt install fail2ban -y
```

### 4. Firewall

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW
apt install ufw -y

# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH
ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP –∏ HTTPS
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç—å firewall
ufw enable
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install --upgrade -r api/requirements.txt
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `api/main_prod.py`:
```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('/var/log/food2mood-api/app.log'),
        logging.StreamHandler()
    ]
)
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –ø–æ–º–æ—â—å—é Uptime Robot

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://uptimerobot.com
2. –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä –¥–ª—è `https://api.yourdomain.com/health`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

–î–æ–±–∞–≤—å—Ç–µ middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
import time
from fastapi import Request

@app.middleware("http")
async def log_requests(request: Request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    logging.info(
        f"{request.method} {request.url.path} - "
        f"Status: {response.status_code} - "
        f"Time: {process_time:.4f}s"
    )
    return response
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/koreanchick
git pull origin main
source venv/bin/activate
pip install -r api/requirements.txt
supervisorctl restart food2mood-api
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –í—ã–±—Ä–∞—Ç—å —Ö–æ—Å—Ç–∏–Ω–≥
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω –∏ DNS
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
supervisorctl tail -f food2mood-api stderr

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
supervisorctl status food2mood-api
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Nginx
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx
systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f /var/log/nginx/error.log
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /app/files/databse.db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
python3 -c "from database.db import Database; db = Database('/app/files/databse.db'); print('OK')"
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API
supervisorctl restart food2mood-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f /var/log/food2mood-api/access.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
supervisorctl status food2mood-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep 8000
```

---

**–£–¥–∞—á–∏ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º! üöÄ**

