# Инструкция по запуску API

## Быстрый запуск

### 1. Убедитесь, что зависимости установлены
```bash
pip install -r api/requirements.txt
```

### 2. Запустите API
```bash
python run_api.py
```

или

```bash
python3 run_api.py
```

### 3. Откройте в браузере

После успешного запуска вы увидите в терминале:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

Тогда откройте в браузере:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Корневой эндпоинт**: http://localhost:8000

## Решение проблем

### Проблема: about:blank или страница не загружается

**Причина 1: API не запущен**
- Проверьте, что в терминале запущен процесс `python run_api.py`
- Должны быть видны сообщения о запуске сервера

**Причина 2: Порт занят**
- Если порт 8000 занят, измените порт в `run_api.py`:
```python
uvicorn.run(
    "api.main:app",
    host="0.0.0.0",
    port=8001,  # Измените на другой порт
    reload=True
)
```

**Причина 3: Ошибки при запуске**
- Проверьте вывод терминала на наличие ошибок
- Убедитесь, что база данных существует: `files/databse.db`
- Проверьте, что все зависимости установлены

**Причина 4: Неправильный URL**
- Используйте точно: `http://localhost:8000/docs` (не `https://`)
- Не используйте `127.0.0.1`, используйте `localhost`

### Проверка работы API

1. Откройте терминал и запустите:
```bash
python run_api.py
```

2. В другом терминале проверьте:
```bash
curl http://localhost:8000/
```

Должен вернуться JSON:
```json
{
  "message": "Food2Mood API",
  "version": "1.0.0",
  "docs": "/docs"
}
```

3. Проверьте health check:
```bash
curl http://localhost:8000/health
```

### Альтернативный способ запуска

Если `run_api.py` не работает, запустите напрямую:

```bash
uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload
```

### Проверка порта

Если порт занят, найдите процесс:
```bash
lsof -i :8000
```

Затем остановите процесс или используйте другой порт.

